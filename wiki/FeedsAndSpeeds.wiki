#summary Spindle Speed and Feedrate estimation

= Introduction =

Many of the NC operations support the configuration of separate spindle speed and feedrate values.  If enough configuration information is made available, these values will be estimated by the application so that the default values are established with 'reasonable' values.  If the estimated values are inappropriate, the user may change them on a per-NC operation basis.

= Details =

The estimation of spindle speed and feedrate is based on a series of separately configured parameters.  Above all of them, however, is a true/false flag that may be set from the 'Feeds And Speeds' (parent) item's properties.  This has options for 'estimate when possible' and 'use default values'.  If the 'estimate when possible' option has been selected then any NC operations that are created will have spindle speed and feed rate values set based on calculations described below.

http://heekscnc.googlecode.com/svn/wiki/FeedsAndSpeeds/FeedsAndSpeeds-Properties.png

The first parameter used by the calculation relates to the raw material being machined.  The possible values are stored as sub-items beneath the FeedsAndSpeeds section.  The selection of which of these sub-items is currently active is made within the Program Properties.  Specifically it is the 'Material Name' and the 'Brinell Hardness of raw material'.  These two values are used, along with the cutting tool material, to select a single 'Speed Reference' element to determine the 'surface speed' that is most appropriate for machining.

http://heekscnc.googlecode.com/svn/wiki/FeedsAndSpeeds/Program-Properties.png

The second parameter is the material that makes up the cutting tool's edge.  This is configured along with each separate cutting tool.  It can have a value of either 'High Speed Steel' or 'Carbide'.

The combination of material name, Brinell hardness and tool material are combined to retrieve a 'surface speed' value from one of the Speed Reference elements.  This surface speed represents the differential speed between the cutting edge and the raw material.  This surface speed is then converted into a spindle speed by combining it with the cutting tool's diameter.

http://heekscnc.googlecode.com/svn/wiki/FeedsAndSpeeds/SpeedReferences.png

At this stage the spindle speed is an 'ideal' speed.  This value is then compared with the currently configured machine's maximum spindle speed.  If the ideal speed exceeds the machine's maximum then the estimated spindle speed is reduced accordingly.

Once the spindle speed has been determined, the cutting tool's "maximum advance per revolution" parameter combines with it to produce an ideal feed rate.  The choice as to whether to assign this as a vertical, horizontal or combination feedrate is made by looking at the type of cutting tool being used.  i.e. drills will assign the feedrate as a vertical feedrate.  Milling bits will assign it as a horizontal feedrate.  A turning tool will assign a proportion (1/sqrt(2.0)) to both horizontal and vertical feedrates.

Finally, (AND THIS PART HAS NOT BEEN IMPLEMENTED YET) the depth of cut is combined with the feedrate and tool dimensions to establish a material removal rate.  This ideal material removal rate will be compared with a maximum such setting configured for the hardness of the material being machined.  This material removal rate setting is the best place to allow for a machine's rigidity.  i.e. the smaller the number the lighter (or slower) the cuts will be made.  These material removal rates are configured for a particular Brinell hardness value.  These configurations can be seen within the FeedsAndSpeeds section of the data model.  These are the entries that would be most likely configured on a machine-by-machine basis.  i.e. once the user gets a feel for material removal rates that their machine is capable of, these values can be configured into these objects.  This will influence subsequent machining feedrate calculations.

http://heekscnc.googlecode.com/svn/wiki/FeedsAndSpeeds/CuttingRate.png

= Default Speed References =

Part of the feeds and speeds calculations come from speed reference elements that must already exist in the data model.  These speed references combine material name, Brinell hardness and cutting tool material to configure an appropriate surface cutting speed.  Specific speed references must exist for the materials being cut if appropriate feed and spindle speeds are to be recommended.

The HeeksCNC application supports the automatic loading of these values from a 'default.speeds' file whenever a 'File'->'New' command is issued.

The file's name MUST begin with 'default' and it must have the keyword 'speed' in it somewhere.  The default.speeds file may come from either the user's default configuration directory (HOME directory on Linux and "c:\Documents and Settings\username\Application Data" on Windows) or it must be located in the same directory as the HeeksCNC.so or HeeksCNC.DLL file. 
The file must contain the parent element <HeeksCNC_Document> as well as <SpeedReference> elements.  It should not contain elements other than these two.