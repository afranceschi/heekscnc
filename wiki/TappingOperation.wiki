#summary Tapping Cycles (EMC2 G33.1, ISO G84 - right, G74 -left cycles)
= Introduction =

The Tapping Cycle supports the inclusion of tapping operations on points. The selection logic for points is similar to the logic for selecting points for the Drilling operation:

Tapping cycles will be located at an aggregation of;

    - the location of any parent drilling operations (recursively). Tapping needs a drilled hole, so the best way to add a tap is to add the operation as a child of the Drilling operation. The Tapping operation will inherit the points from Drilling. 

    - all selected points 

    - the intersections of all other selected objects. 

    - the centre of any selected circles where those circles don't intersect any other selected object. 

    - the starting points of any selected profile operations.


= Workflow =

While you can add a Tapping operation at arbitrary points, taps are done on holes. So the recommended procedure is:

  - add a Tapping Tool object and set its parameters. Sizes can be either chosen from standard sizes ('Select TAP from standard sizes') or set manually (diameter, pitch, direction). The 'Standard sizes' dropdown has Metric, Unified Thread Standard, and British Withworth options. If you select a standard size, diameter and pitch are set; thread direction defaults to right-hand but can be overriden for left-hand threads. The example uses the default ISO M6 metric tap.

  - add a Drilling operation for the pre-drill holes with appropriate diameter and depth. For the example M6 tap a 5mm hole is needed, so define a 5mm  Drill bit if you dont have that in the Tools list. See the page on Drilling on how to select points and set parameters for drilling.

  - optionally you might want to chamfer the hole after drilling

  - select the Drilling object 
  - add a Tapping operation to it
  - set its parameters like depth (make sure it's less than the associated hole!), and spindle speed. For a left-hand tap, set a negative spindle speed value indicating CCW rotation.

  - run a Design Rule check.  
    * Spindle direction (positive speed for clockwise right hand taps, negative for ccw left-hand taps) will be checked against the tools 'Tap direction' (left hand/right hand) setting.
	  * tap depth is checked against hole depth.

  - make Python program/Postprocess

= Parameters =

== Program/Machine ==
    currently the only machine emitting code for tapping is emc2tap, using the G33.1 cycle. This will be migrated to emc2 and hence automatically to derived machines once stable. If somebody can help me with ISO tapping cycles I'd be happy to add that.

== Tap tool  ==

    The relevant parameters are diameter, pitch, and Tap direction. 'Select TAP from standard sizes' should cover most cases as presets.

== Tapping operation  ==

    tap_mode (rigid tapping, chuck tapping). The emc2tap machine only supports rigid tapping which assumes a spindle-synchronized mill.

 === Spindle speed ===

    default at 500 rpm. Set to a negative value  for left-hand taps.

 === Depth ===

    The depth is the distance in the negative Z direction from the point's Z value. 

  === Standoff ===

    The Z value where the (synchronized) movement starts. This should be at least 2-4 times the pitch so spindle and Z axis are fully accelerated once the material is touched. Default is 10mm. 

  === Sort Tapping Locations ===

    If this is 'true', the list of locations at which holes should be tapped is sorted. The sorting algorithm finds the nearest point to (0,0,0) and then, from there, the closest point to the previous one. 


Other parameters are currently unused.
