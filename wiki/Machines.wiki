#summary Making a new machine

To make a new machine, you must make two python files in the HeeksCNC/nc folder.

You must also add an entry to "HeeksCNC/nc/machines.txt" to get this machine added to the drop-down list for the program properties.

The first python file must define a class which is dervied from the class Creator ( defined in HeeksCNC/nc/nc.py ). It must also set the variable nc.creator to be an object of your class; this defines the current machine.

If your machine is similar to an existing machine, which is defined in the nc folder, then derive your new machine from it, so that you only have to define what is different.

For example, let's make a machine which produces the same NC code as the "iso" machine, but without the line numbers.

We must make a python file, let's call it "HeeksCNC/nc/iso_no_line_numbers.py"

We must add a line to HeeksCNC/nc/machines.txt, with the file name and description "iso_no_line_numbers ISO output with no line numbers"

Our python file shall contain the following code

{{{

import nc
import iso

class CreatorIsoNoLineNumbers(iso.CreatorIso):
    def init(self): 
        iso.CreatorIso.init(self) 

    def write_blocknum(self): 
        pass 

nc.creator = CreatorIsoNoLineNumbers()

}}}

This class is derived from the CreatorIso class in iso.py, but we have redefined write_blocknum to make it do nothing.

We must also define the python file that reads the corresponding GCode back into HeeksCNC.  This file's name will be of the form MACHINE_NAME_read.py.  In our example this would be iso_no_line_numbers_read.py.

An example content would be;

{{{
import iso_read as iso
import sys

# just use the iso reader

class ParserIsoNoLineNumbers(iso.ParserIso):
    def __init__(self):
        iso.ParserIso.__init__(self)

if __name__ == '__main__':
    parser = ParserIsoNoLineNumbers()
    if len(sys.argv)>2:
        parser.Parse(sys.argv[1],sys.argv[2])
    else:
        parser.Parse(sys.argv[1])
}}}


Try it. Make a HeeksCNC program, and see that the program's "machine" drop-down contains the "ISO output with no line numbers" machine. Select it and press "Py" and "G0" and see that there are no line numbers. Select the "Standard ISO output" and press "Py" and "G0" and see that there are line numbers again.

== Parameters ==

=== Maximum Spindle Speed ===

If the second last word on the line in the 'machines.txt' configuration file represents a number then it is assumed to represent the maximum spindle speed for the machine.  This value is used during the estimation of spindle speed settings for all NC operations that are based on the SpeedOp class.  If no maximum is known (or wanted) then a value of 0.0 should be used.